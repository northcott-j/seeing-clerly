{"version":3,"sources":["auth/local/index.js"],"names":["express","require","passport","auth","router","Router","post","req","res","next","authenticate","err","user","info","error","status","send","token","signToken","get","isAuthenticated","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACA,IAAIE,OAAOF,QAAQ,iBAAR,CAAX;;AAEA,IAAIG,SAASJ,QAAQK,MAAR,EAAb;;AAEAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACxCP,WAASQ,YAAT,CAAsB,OAAtB,EAA+B,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,IAArB,EAA2B;AACxD,QAAIC,QAAQH,OAAOE,IAAnB;AACA,QAAIC,KAAJ,EAAW,OAAON,IAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB,CAAP;AACX,QAAIG,QAAQd,KAAKe,SAAL,CAAeN,IAAf,CAAZ;AACAJ,QAAIQ,IAAJ,CAAS,EAACC,OAAOA,KAAR,EAAT;AACD,GALD,EAKGV,GALH,EAKQC,GALR,EAKaC,IALb;AAMD,CAPD;;AASAL,OAAOe,GAAP,CAAW,GAAX,EAAgB,UAASZ,GAAT,EAAcC,GAAd,EAAmB;AACjCL,OAAKiB,eAAL,CAAqBb,GAArB,EAA0BC,GAA1B;AACD,CAFD;;AAIAa,OAAOC,OAAP,GAAiBlB,MAAjB","file":"auth/local/index.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar passport = require('passport');\nvar auth = require('../auth.service');\n\nvar router = express.Router();\n\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function (err, user, info) {\n    var error = err || info;\n    if (error) return res.status(401).send(error);\n    var token = auth.signToken(user);\n    res.send({token: token});\n  })(req, res, next)\n});\n\nrouter.get('/', function(req, res) {\n  auth.isAuthenticated(req, res);\n});\n\nmodule.exports = router;\n"],"sourceRoot":"/source/"}